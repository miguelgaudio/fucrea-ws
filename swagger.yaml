swagger: '2.0'

info:
  version: "1"
  title: fucrea

host: basic-auth-server.herokuapp.com
schemes:
  - https
securityDefinitions:
  Bearer:
    type: apiKey
    name: Authorization
    in: header


#responseCodesDefinition:
#  200:
#    descripcion: Success, no modifica estados de base de datos
#  201:
#    descripcion: Success, crea nuevo objeto en base  de datos
#  204:
#    descripcion: Success, modifica un objeto de base de datos
#  400:
#    descripcion: Error proveniente del cliente
#  401:
#    descripcion: Usuario no autorizado para la accion por falta de credenciales
#  403:
#    descripcion: Usuario no autorizado por falta de permisos
#  404:
#    descripcion: Recurso no encontrado
#  500:
#    descripcion: Error proveniente del servidor

paths:
  ### USERS SERVICES
  /users/:
    post:
      summary: Sends user an email invitation, and creates the user.
      description: |
        Sends an invitation via mail to the described user. If the user already exists on the system, it will be associated with the desscribed establishments, if not, an invitation will be created for him. It invitation wil be sended by email if the invited user has an email (and email was specified), or given to the guest user if not, in order to share the invitation by any other channel. Once the invited user has the invitation, it will complete the registration.
        Note that the beavior of this POST sometimes creates objects and sometimes modifies the object (referenced by the username). Almost never raises duplicate errors.
        Note that the email must be uniqe to let the user reset his password (maybe we could do something far complicated to handle this, but I dont know...).
        If the user already exists in the system, the email field will be ignored.
      consumes:
        - application/json
      produces:
        - application/json
      security:
        - Bearer: []
      parameters:
        -
          name: user
          in: body
          description: User's info. In the email template. The 'XXX' will be replaced with the token in the registration email.
          required: false
          schema:
            properties:
              registration_url_template:
                type: string
              user:
                $ref: '#/definitions/User'
          # example:
          #   'usuarios/invite?registration_token=XXX&algomas=1'
      responses:
        201:
          description: User created Ok.
          schema:
            properties:
              email_sended:
                type: boolean
              registration_url:
                type: string
              user:
                $ref: '#/definitions/User'
        400:
          description: Already exists an user with that email.
    get:
      description: |
        List users in my establishments. The user itself will be not in the list. Only users with lower roles (subordinated) will be listed.
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        200:
          description: Ok
          schema:
            type: array
            items:
              $ref: '#/definitions/User'
  /users/{id}/:
    patch:
      description: |
        Updates user's info. If active user is an advisor, it will be only allow to manage producers, althouth he can list any other user in my establishments.
        This WS cant be used to change email nor username.
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: id
          in: path
          required: true
          description: User's id
          type: integer
        -
          name: user
          in: body
          description: User's info
          required: false
          schema:
            $ref: '#/definitions/UserPATCH'
      responses:
        204:
          description: Ok
        404:
          description: User not found
    delete:
      description: |
        Deasociate user from all my establishments (the user will feel like it was deleted). Only subordinate users can be deleted. Users cant delete hereselves.
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: id
          in: path
          required: true
          description: User's id
          type: integer
      responses:
        204:
          description: Ok
        404:
          description: User not found
  /users/confirm/:
    patch:
      description: |
        Sends supplied registration token to confirm user's registration. The user will be logged in after that (implicit login).
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: registration_data
          in: body
          required: true
          description: Authentication token sent by email to registrating user and user's password
          schema:
            properties:
              password:
                type: string
              registration_token:
                type: string
      responses:
        200:
          description: Registro de usuario confirmado correctamente. An access_token is returned (implicit login).
          schema:
            properties:
              access_token:
                type: string
  /users/change_email/:
    post:
      description: |
        Changes email for current user
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: data
          in: body
          required: true
          description: parameters to update email. In the email template. The 'XXX' will be replaced with the token in the verification email.
          schema:
            properties:
              password:
                type: string
              new_email:
                type: string
              verification_url_template:
                type: string
                # example:
                #   'usuarios/verification_email?verification_token=XXX&algomas=1'
      responses:
        204:
          description: Mail modified OK. Informative email sended to user (if it has an email), to the new email address. The mail could contain a verification URL for the new address.
        400:
          description: Already exists an user with that email.
  /users/change_username/:
    post:
      description: |
        Changes username for current user
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: data
          in: body
          required: true
          description: parameters to update username
          schema:
            properties:
              password:
                type: string
              new_username:
                type: string
      responses:
        204:
          description: Username modificado OK. Informative email sended to user (if it has an email).
        400:
          description: Already exists an user with that username.
  /users/change_password/:
    patch:
      description: |
        Changes password for current user
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: data
          in: body
          required: true
          description: New user's password
          schema:
            type: object
            properties:
              old_password:
                type: string
              new_password:
                type: string
      responses:
        204:
          description: Password updated. Informative email sended to user (if it has an email).
  /users/{id}/invite/:
    patch:
      description: |
        Resends a mail invitation to a created user, or, if the user doesnt have an email, retrieve a registration_url (with a registration_token inside) to share with invited user to let him complete his registration.
        The registration_token has new expiricy period, and invalidated older registration_token issued.
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: id
          in: path
          required: true
          description: User's id to send invitation to. In the email template. The 'XXX' will be replaced with the token in the registration email.
          type: integer
        -
          name: data
          in: body
          description: url template
          schema:
            type: object
            properties:
              registration_url_template:
                type: string
                # example:
                #   'usuarios/registration?registration_token=XXX&algomas=1'
      responses:
        200:
          description: Invitation sended
          schema:
            properties:
              email_sended:
                type: boolean
              registration_url:
                type: string
        404:
          description: User not found.
  /users/reset_password/request/:
    post:
      description: |
        Sends an email with a token to reset password
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: email
          in: body
          required: true
          description: User's emial to send reset token to. In the email template. The 'XXX' will be replaced with the token in the reset email.
          schema:
            properties:
              email:
                type: string
              reset_url_template:
                type: string
                # example:
                #   'usuarios/reset_pass?reset_token=XXX&algomas=1'
      responses:
        204:
          description: Mail sended Ok.
        404:
          description: No user found with that email
  /users/reset_password/confirm/:
    post:
      description: |
        Sends supplied reset token to allow user reset his password. Makes an implicit login (returns an access_token)
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: reset_data
          in: body
          required: true
          description: Authentication token sent by email to reset user's password, and new password
          schema:
            properties:
              password:
                type: string
              reset_token:
                type: string
      responses:
        200:
          description: Password reseted OK.
          schema:
            properties:
              access_token:
                type: string
        404:
          description: The token is not valid.
  /users/login/:
    post:
      description: |
        User logs in the platform. If remember_me the access_token has a longer expiricy period.
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: credentials
          in: body
          description: User's login credentials
          required: true
          schema:
            properties:
              username:
                type: string
              password:
                type: string
              remember_me:
                type: boolean
      responses:
        200:
          description: User logged in
          schema:
            type: object
            properties:
              access_token:
                type: string
              user:
                $ref: '#/definitions/UserLogin'
        400:
          description: No user with that username, or auth failed (pass or username wrong).
  /users/logout/:
    post:
      description: |
        User logs out of the platform
      security:
        - Bearer: []
      produces:
        - application/json
      responses:
        204:
          description: User logged out Ok.
  ### USERS SERVICES END

  ### ADMINISTRATION SERVICES
  /establishments/:
     get:
       description: |
         List establishments
       security:
        - Bearer: []
       responses:
         200:
           description: Establecimientos obtenidos correctamente
           schema:
             type: array
             items:
              $ref: '#/definitions/Establishment'
         400:
          description: Error del cliente
         401:
          description: Usuario no autenticado
         403:
          description: El usuario no tiene permisos para realizar la acción
         500:
          description: Error del servidor
  /establishments/unasigned/:
    get:
      description: |
         List unasigned establishments
      security:
        - Bearer: []
      responses:
        200:
          description: Establecimientos obtenidos correctamente
          schema:
            type: array
            items:
              type: object
              properties:
                id:
                  type: integer
                name:
                  type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /establishments/{id}/:
    patch:
       description: |
          Updates establishment's info
       security:
        - Bearer: []
       consumes:
        - application/json
       produces:
        - application/json
       parameters:
        -
          name: establishment
          in: body
          description: Establishment info
          required: true
          schema:
            $ref: '#/definitions/EstablishmentPATCH'
        -
          name: id
          in: path
          description: Establishment's id
          required: true
          type: integer
       responses:
         204:
           description: Establecimiento actualizado correctamente
         400:
          description: Error del cliente
         401:
          description: Usuario no autenticado
         403:
          description: El usuario no tiene permisos para realizar la acción
         404:
          description: Establecimiento no enontrado
         500:
          description: Error del servidor
  /establishments/{id}/characterizations/:
    post:
      description: |
        Create new establishment's categorization
      security:
        - Bearer: []
      parameters:
        -
          name: characterization
          in: body
          required: true
          description: Characterization info
          schema:
            $ref: '#/definitions/CharacterizationPOSTList'
        -
          name: id
          in: path
          required: true
          description: Establishment's id
          type: integer
      responses:
         201:
           description: Categorización creada con éxito
         400:
          description: Error del cliente
         401:
          description: Usuario no autenticado
         403:
          description: El usuario no tiene permisos para realizar la acción
         404:
          description: Establecimiento no enontrado
         500:
          description: Error del servidor

  /establishments/{id}/lots/:
    get:
      description: |
        Get lots in the establishment
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          description: Establishment's id
          type: integer
      responses:
         201:
           description: Lote retornado
           schema:
            type: array
            items:
              $ref: '#/definitions/LotInEstablishmentPOST'
         400:
          description: Error del cliente
         401:
          description: Usuario no autenticado
         403:
          description: El usuario no tiene permisos para realizar la acción
         404:
          description: Establecimiento no enontrado
         500:
          description: Error del servidor
    post:
      description: |
        Create new lot in establishment
      security:
        - Bearer: []
      parameters:
        -
          name: lot
          in: body
          required: true
          description: Lot info
          schema:
            $ref: '#/definitions/LotInEstablishmentPOST'
        -
          name: id
          in: path
          required: true
          description: Establishment's id
          type: integer
      responses:
         201:
           description: Lote modificado con éxito
         400:
          description: Error del cliente
         401:
          description: Usuario no autenticado
         403:
          description: El usuario no tiene permisos para realizar la acción
         404:
          description: Establecimiento no enontrado
         500:
          description: Error del servidor

  /companies/:
    get:
      description: |
        List user's companies
      security:
        - Bearer: []
      responses:
        200:
          description: Empresas obtenidas correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/Company'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      description: |
        Creates a new company
      security:
        - Bearer: []
      parameters:
        -
          name: company
          in: body
          required: true
          description: Company info
          schema:
            $ref: '#/definitions/CompanyPOST'
      responses:
        200:
          description: Empresas creada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /companies/{id}/:
    patch:
      description: |
        Updates company's data
      security:
        - Bearer: []
      parameters:
        -
          name: company
          in: body
          required: true
          description: Company info
          schema:
            $ref: '#/definitions/CompanyPOST'
        -
          name: id
          in: path
          required: true
          description: Company's id
          type: integer
      responses:
        204:
          description: Empresa actualizada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Empresa no enontrada
        500:
          description: Error del servidor
    delete:
      description: |
        Deletes a company
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          description: Company's id
          type: integer
      responses:
        204:
          description: Empresa eliminada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Empresa no enontrada
        500:
          description: Error del servidor
  /companies/establishments/:
    get:
      description: |
        Lists companies with its establishments in brief format
      security:
        - Bearer: []
      responses:
        200:
          description: Establecimientos obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/EstablishmentBrief'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /lots/:
    get:
      description: |
         List lots
      security:
        - Bearer: []
      responses:
        200:
          description: Lotes obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/Lot'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /lots/decode_kml/:
    post:
      description: |
         Load many lots from a KML file. It uses the KML name tag as the lot's code. Returns default values for the each lot field as metadata in the response geojson properties
      security:
        - Bearer: []
      consumes:
        - multipart/form-data
      parameters:
        -
          name: kml_file
          in: formData
          description: El archivo KML a interpretar
          required: true
          type: file
      responses:
        200:
          description: KML traducido OK
          schema:
            $ref: '#/definitions/GEOJsonFeatureCollection'
  /lots/decode_kml_single/:
    post:
      description: |
         Load one lot geometry from a KML file. It uses the KML name tag as the lot's code. Returns default values for the each lot field as metadata in the response geojson properties. Meld all the geometries as one.
      security:
        - Bearer: []
      consumes:
        - multipart/form-data
      parameters:
        -
          name: kml_file
          in: formData
          description: El archivo KML a interpretar
          required: true
          type: file
      responses:
        200:
          description: KML traducido OK
          schema:
            $ref: '#/definitions/GEOJsonFeature'
  /lots/{id}/:
    patch:
      security:
        - Bearer: []
      description: |
        Updates a lot
      parameters:
        -
          name: lot
          in: body
          required: true
          description: Lots info
          schema:
            $ref: '#/definitions/LotPATCH'
        -
          name: id
          in: path
          required: true
          description: Lots's id
          type: integer
      responses:
        204:
          description: Potrero actualizado correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Potrero no enontrado
        500:
          description: Error del servidor
    delete:
      description: |
        Deletes a lot
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          description: Lots's id
          type: integer
      responses:
        204:
          description: Lote eliminada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Potrero no enontrado
        500:
          description: Error del servidor
  /lots/{id}/decode_kml_single/:
    patch:
      description: |
         Load one lot geometry from a KML file. Returns default values for the each lot field as metadata in the response geojson properties. Meld all the geometries as one.
      security:
        - Bearer: []
      consumes:
        - multipart/form-data
      parameters:
        -
          name: kml_file
          in: formData
          description: El archivo KML a interpretar
          required: true
          type: file
        -
          name: id
          in: path
          required: true
          description: Lots's id
          type: integer
      responses:
        200:
          description: KML traducido OK
          schema:
            $ref: '#/definitions/GEOJsonFeature'
  /lots/{id}/join/:
    patch:
      security:
        - Bearer: []
      description: |
        Join many lots geofences into the lot in the url path. The Lots joined are deleted
      parameters:
        -
          name: joined_lots
          in: body
          required: true
          description: Lots info
          schema:
            type: object
            properties:
              lots:
                type: array
                items:
                  type: integer
        -
          name: id
          in: path
          required: true
          description: Lots's id
          type: integer
      responses:
        200:
          description: Lote unido con otros lotes OK
          schema:
            $ref: '#/definitions/LotInEstablishmentPOST'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Potrero del path no enontrado
        500:
          description: Error del servidor
  /lots/{id}/divide/:
    patch:
      security:
        - Bearer: []
      description: |
        Create many lots with the data passed in the body, and updates the geofence of lot in the path to the remaining geofence not used by the others.
      parameters:
        -
          name: new_lots
          in: body
          required: true
          description: Many Lots infos
          schema:
            type: array
            items:
              $ref: '#/definitions/LotInEstablishmentPOST'
        -
          name: id
          in: path
          required: true
          description: Lots's id
          type: integer
      responses:
        200:
          description: Lotes divididos OK
          schema:
            type: array
            items:
              $ref: '#/definitions/LotInEstablishmentPOST'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Potrero no enontrado
        500:
          description: Error del servidor
  /crea_groups/:
    get:
      description: |
         List Crea groups
      security:
        - Bearer: []
      responses:
        200:
          description: Crea groups obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/CreaGroup'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /crea_groups/all/:
    get:
      description: |
         List Crea groups
      security:
        - Bearer: []
      responses:
        200:
          description: Crea groups obtenidos correctamente
          schema:
            type: array
            items:
              type: object
              properties:
                name:
                  type: string
                id:
                  type: integer
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /crea_groups/establishments/:
    get:
      description: |
        Lists crea groups with its establishments in brief format
      security:
        - Bearer: []
      responses:
        200:
          description: Establecimientos obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/CreaGroupDeep'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor

  /providers/:
    get:
      description: |
         List providers
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: true
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
        -
          name: reduced
          in: query
          required: false
          type: boolean
      responses:
        200:
          description: Proveedores groups obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/Provider'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      description: |
        Creates a new provider
      security:
        - Bearer: []
      parameters:
        -
          name: provider
          in: body
          required: true
          description: Provider info
          schema:
            $ref: '#/definitions/ProviderPOST'
      responses:
        200:
          description: Proveedor creada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /providers/{id}/:
    patch:
      description: |
        Updates provider's data
      security:
        - Bearer: []
      parameters:
        -
          name: provider
          in: body
          required: true
          description: Provider info
          schema:
            $ref: '#/definitions/ProviderPATCH'
        -
          name: id
          in: path
          required: true
          description: Provider's id
          type: integer
      responses:
        204:
          description: Proveedor actualizada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Empresa no enontrada
        500:
          description: Error del servidor
    delete:
      description: |
        Deletes a provider
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          description: Provider's id
          type: integer
      responses:
        204:
          description: Proveedor eliminada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Empresa no enontrada
        500:
          description: Error del servidor
  ### ADMINISTRATION SERVICES END

  ### AUX SERVICES
  /forms/characterizations/:
    get:
      description: |
        Lists every field with its options to fill the categorizations and filters forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
              $ref: '#/definitions/CharacterizationsAndFiltersFormList'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /forms/indicators/:
    get:
      description: |
        Lists every field with its options to fill the indicators and filters forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
              $ref: '#/definitions/IndicatorFilterFormList'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /forms/user_forms/:
    get:
      description: |
        Lists every field with its options to fill the users forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
              $ref: '#/definitions/UserFormList'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /forms/land_use/:
    get:
      description: |
        Lists months and crops
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
              $ref: '#/definitions/LandUseFormList'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /forms/land_use/oldest/:
    get:
      description: |
        Returns oldest exercise to list in land uses
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: true
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
              type: object
              properties:
                oldest_exercise:
                  type: integer
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /forms/account_plans/:
    get:
      description: |
        Lists every field with its options to fill the account plans forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
              $ref: '#/definitions/AccountPlans'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /forms/supplies/:
    get:
      description: |
        Lists every field with its options to fill the supplies forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
            type: object
            properties:
              supply_types:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
              movements_choices:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
              units_choices:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
              active_components:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    unit:
                      type: integer
              active_component_units:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: integer
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      description: |
        Requests creation of a new active component
      security:
        - Bearer: []
      parameters:
        -
          name: aactive_component
          in: body
          required: false
          schema:
            properties:
              name:
                type: string
      responses:
        200:
          description: Pedido hecho correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /forms/investments/:
    get:
      description: |
        Lists every field with its options to fill the investments forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
            type: object
            properties:
              investment_types:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /forms/providers/:
    get:
      description: |
        Lists every field with its options to fill the providers forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
            type: object
            properties:
              provider_types:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /forms/savings_banks/:
    get:
      description: |
        Lists every field with its options to fill the savings banks forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
            type: object
            properties:
              currencies:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
              savings_banks_categories:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
              savings_banks_movements_types:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
                      
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor        
  /forms/tickets/:
    get:
      description: |
        Lists every field with its options to fill the savings banks forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
            type: object
            properties:
              payment_types:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
              ticket_types:
                type: array
                items:
                  type: object
                  properties:
                    value:
                      type: integer
                    description:
                      type: string
              
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor        
  ### AUX SERVICES END

  ### INDICATORS SERVICES
  /indicators/summary/:
    get:
      description: |
        Returns list of indicators acording to user configuration
      parameters:
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: exercise_dates
          in: query
          required: true
          type: array
          items:
            type: string
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
        -
         name: establishment_id
         in: query
         required: true
         type: integer
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
            type: array
            items:
             type: object
             properties:
              title:
                type: string
              graphics:
                type: object
                properties:
                  economical_evolution:
                        type: object
                        properties:
                          series:
                            type: object
                            properties:
                              producto_bruto_total:
                                type: array
                                items:
                                  type: integer
                              ingreso_capital_real:
                                type: array
                                items:
                                  type: integer
                              total_insumos_supuesto_propiedad:
                                type: array
                                items:
                                  type: integer
                          categories:
                            type: array
                            items:
                              type: integer
                          type_graphic:
                            type: string
                          name:
                            type: string
                          yAxis:
                            type: string
                  area_evolution:
                    type: object
                    properties:
                      series:
                        type: object
                        properties:
                          agrcultural:
                            type: array
                            items:
                              type: integer
                          forest:
                            type: array
                            items:
                              type: integer
                          milkmaid:
                            type: array
                            items:
                              type: integer
                          cattle:
                            type: array
                            items:
                              type: integer
                          fine_seed:
                            type: array
                            items:
                              type: integer
                      categories:
                        type: array
                        items:
                          type: integer
                      type_graphic:
                            type: string
                      name:
                        type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /indicators/graphic/management/:
    post:
      description: |
        Returns an indicators tree acording to filters selected
      parameters:
        -
           name: filters
           in: body
           required: false
           description: |
            Company_id=0 significa "Sin empresa", no "Todas las empresas", company_id=null significa todas las empresas. Establishment_id=0 o =null significa "Todos los establecimientos". Company_id=null y establishment_id=null significa todos los establecimientos de todas las empresas
           schema:
              properties:
                company_id:
                  type: integer
                crea_group_id:
                  type: integer
                establishment_id:
                  type: integer
                exercise_date:
                  type: array
                  items:
                    type: string
                    format: date
                comparative:
                  type: object
                  properties:
                    compare_w_myself:
                      type: boolean
                    exercise_date:
                      type: array
                      items:
                        type: string
                        format: date
                    company_id:
                      type: integer
                    crea_group_id:
                      type: integer
                    establishment_id:
                      type: integer
                    characterization:
                      $ref: '#/definitions/CharacterizationPOSTList'
                    filters:
                      type: array
                      items:
                        $ref: '#/definitions/IndicatorFilterPOSTList'
      responses:
        200:
          description: Indicador obtenido correctamente
          examples:
              name: 'r%'
              short_name: 'r%'
              value: 10
              children:
                - name: 'Cd bla bla'
                  short_name: 'Cd'
                  value: 2.3
                  children: []
                - name: 'Ingreso capital bla bla'
                  short_name: 'Ik'
                  value: 3
                  children: []
          schema:
            type: object
            properties:
              indicators_compared:
                type: integer
              indicators_list:
                type: array
                items:
                  type: object
                  properties:
                    tree:
                      type: object
                      properties:
                        name:
                          type: string
                        short_name:
                          type: string
                        value:
                          type: number
                          format: float
                        children:
                          type: array
                          items:
                            $ref: '#/definitions/IndicatorTree'
                    indicators_quantity:
                      type: integer
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /indicators/graphic/margin/:
    get:
      description: |
        Returns the evolution of MB for the delected exercises
      parameters:
        -
         name: filters
         in: body
         required: true
         description: Filters to calculate indicators
         schema:
            properties:
              company_id:
                type: integer
              crea_group_id:
                type: integer
              establishment_id:
                type: integer
              exercise_dates:
                type: array
                items:
                  type: string
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
             type: object
             properties:
                mb_evolution:
                  type: object
                  properties:
                    series:
                      type: object
                      properties:
                        agricultural:
                          type: array
                          items:
                            type: integer
                        cattle:
                          type: array
                          items:
                            type: integer
                        forest:
                          type: array
                          items:
                            type: integer
                        fine_seed:
                          type: array
                          items:
                            type: integer
                    categories:
                      type: array
                      items:
                        type: string
                mb_tables:
                  type: object
                  properties:
                    columns:
                      type: array
                      items:
                        type: string
                    content:
                      type: array
                      items:
                        type: object
                        properties:
                          exercise:
                            type: string
                          rows:
                            type: array
                            items:
                              type: string

        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /indicators/detail/:
    get:
      description: |
        Returns an indicator list to show on the table
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
             type: array
             items:
               type: object
               properties:
                stored_comparatives:
                  $ref: '#/definitions/IndicatorDetailList'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      description: |
        Calculates an indicator acording to selected chategorization and filters
      parameters:
        -
           name: comparative
           in: body
           required: false
           description: Filters to calculate indicator
           schema:
              properties:
                  compare_w_myself:
                    type: boolean
                  exercise_date:
                    type: integer
                  company_id:
                    type: integer
                  establishment_id:
                    type: integer
                  characterization:
                    $ref: '#/definitions/CharacterizationPOSTList'
                  filters:
                      type: array
                      items:
                        $ref: '#/definitions/IndicatorFilterPOSTList'
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
             $ref: '#/definitions/IndicatorDetailList'
        400:
          description: Error del cliente
        500:
          description: Error del servidor
    delete:
      description: |
        Deletes a stored indicator detail
      parameters:
        -
           name: ids
           in: query
           required: false
           description: Indicator ids to delete, comma separated string
           type: array
           items:
            type: string
      responses:
        204:
          description: Indicador eliminada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Indicador no enontrado
        500:
          description: Error del servidor
  /indicators/detail/descriptions/:
    post:
      description: |
        Updates descriptions of stored indicators detail
      parameters:
        -
          name: descriptions
          in: body
          required: false
          description: Indicator ids and descriptions to update
          schema:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                  description:
                    type: string
      responses:
        204:
          description: Indicador eliminada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Indicador no enontrado
        500:
          description: Error del servidor
  /indicators/detail/configuration/:
    get:
      description: |
        Returns an indicator identifier list to show on the table
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
             type: array
             items:
              type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      description: |
        Sends an indicator identifier list to save user's indicator table configuration
      parameters:
        -
           name: indicators
           in: body
           required: false
           description: List of Indicators reference name
           schema:
              type: array
              items:
                type: string
      responses:
        200:
          description: Indicadores obtenidos correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### INDICATORS DEFINITIONS END

  ### LAND USES SERVICES
  /land_uses/summary/:
    get:
      description: |
        Returns land use values by type and exercise. Company_id, establishment_id and crea_group_id are exclusive between them
      parameters:
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: exercise_dates
          in: query
          required: true
          type: array
          items:
            type: string
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
        -
         name: establishment_id
         in: query
         required: true
         type: integer
      responses:
        200:
          description: Usos de suelo obtenidos correctamente
          schema:
            type: array
            items:
                type: object
                properties:
                  land_use:
                    type: object
                    properties:
                      series:
                        type: object
                        properties:
                          soja:
                            type: array
                            items:
                              type: integer
                          sorgo:
                            type: array
                            items:
                              type: integer
                          maiz:
                            type: array
                            items:
                              type: integer
                          super_pastura:
                            type: array
                            items:
                              type: integer
                      categories:
                        type: array
                        items:
                          type: integer
                      name:
                        type: string
                      graphic_type:
                        type: string
                      yAxis:
                        type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /land_uses/detail/:
    get:
      description: |
        Returns land use values by type and exercise. Company_id, establishment_id and crea_group_id are exclusive between them. Undefined hectares are sent by the crop key "undefined"
      parameters:
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: exercise_dates
          in: query
          required: true
          type: array
          items:
            type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
        -
         name: establishment_id
         in: query
         required: true
         type: integer
      responses:
        200:
          description: Usos de suelo obtenidos correctamente
          schema:
            type: array
            items:
             type: object
             properties:
              exercise:
                type: integer
              summary:
               type: array
               example:
                  - crop: 'Trigo'
                    hectares: 3
                    crop_id: 2
                  - crop: 'undefined'
                    hectares: 18
               items:
                  type: object
                  properties:
                    crop:
                      type: string
                    hectares:
                      type: integer
                    crop_id:
                      type: integer
              detail:
                type: array
                items:
                  $ref: '#/definitions/MonthlyLandUse'
              undefined_hectares:
                type: number
                format: float
              closed:
                type: boolean
              global_deleting:
                type: boolean
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      description: |
        Updates a land use for selected months
      parameters:
        -
          name: land_use
          in: body
          required: true
          schema:
            type: object
            properties:
              lot_id:
                type: integer
              exercise_date:
                type: integer
              month_start:
                type: integer
              duration:
                type: integer
              complete_successors:
                type: boolean
              crop:
                type: integer
              hectares:
                type: integer
      responses:
        200:
          description: Uso de suelo actualizado correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    delete:
      description: |
        Deletes all land uses for selected months
      parameters:
        -
          name: land_use
          in: body
          required: true
          schema:
            type: object
            properties:
              lot_id:
                type: integer
              exercise_date:
                type: integer
              month_start:
                type: integer
              duration:
                type: integer
      responses:
        200:
          description: Uso de suelo actualizado correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /land_uses/detail/global/:
    post:
      description: |
        Updates a land use globally
      parameters:
        -
          name: land_use
          in: body
          required: true
          schema:
            type: object
            properties:
              establishment_id:
                type: integer
              exercise_date:
                type: integer
              hectares:
                type: integer
              crop:
                type: integer
      responses:
        204:
          description: Uso de suelo eliminado correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor

    delete:
      description: |
        Deletes a land use globally
      parameters:
        -
          name: land_use
          in: body
          required: true
          schema:
            type: object
            properties:
              establishment_id:
                type: integer
              exercise_date:
                type: integer
              crop:
                type: integer
      responses:
        204:
          description: Uso de suelo eliminado correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /land_uses/detail/copy/:
    post:
      description: |
        Copies land use values from the selected lot others lots selected
      parameters:
        -
          name: copy_parameters
          in: body
          required: true
          schema:
            type: object
            properties:
              exercise_date:
                type: integer
              origin_lot_id:
                type: integer
              destiny_lot_ids:
                type: array
                items:
                  type: integer
              land_uses:
                type: array
                items:
                  type: object
                  properties:
                    month:
                      type: integer
                    crop:
                      type: integer
      responses:
        200:
          description: Uso de suelo actualizado correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### LAND USES END

  ### SUPPLY BEGIN
  /inventory/supplies/:
    get:
      description: |
         List supplies for the specified establishment
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: true
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
      responses:
        200:
          description: Insumos obtenidos correctamente
          schema:
            type: array
            items:
              properties:
                id:
                  type: integer
                description:
                  type: string
    post:
      security:
        - Bearer: []
      description: |
        Creates supply
      parameters:
        -
          name: supply
          in: body
          required: true
          description: Supply info
          schema:
            type: object
            properties:
              description:
                type: string
              type:
                type: integer
              establishment_id:
                type: integer
              unit:
                type: integer
              comments:
                type: string
              active_components:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    concentration:
                      type: number
                      format: float
              nytrogen_concentration:
                type: number
                format: float
              hydrogen_concentration:
                type: number
                format: float
              phosphorus_concentration:
                type: number
                format: float
              sulfur_concentration:
                type: number
                format: float
      responses:
        201:
          description: Insumos agrados correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /inventory/supplies/{id}/:
    get:
      description: |
         Returns info about specified supply and his movements
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          type: integer
      responses:
        200:
          description: Detalle obtenidos correctamente
          schema:
            $ref: '#/definitions/SupplyDetail'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    patch:
      security:
        - Bearer: []
      description: |
        Updates a the selected supply
      parameters:
        -
          name: id
          in: path
          required: true
          description: Supply's id
          type: integer
        -
          name: supply
          in: body
          required: true
          description: Supply info
          schema:
            type: object
            properties:
              description:
                type: string
              active_components:
                type: object
                properties:
                  id_1:
                    type: number
                    format: float
              nytrogen_concentration:
                type: number
                format: float
              hydrogen_concentration:
                type: number
                format: float
              phosphorus_concentration:
                type: number
                format: float
              sulfur_concentration:
                type: number
                format: float
      responses:
        204:
          description: Insumos agrados correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /inventory/supplies/{id}/add/:
    post:
      security:
        - Bearer: []
      description: |
        Adds a specified quantity for the selected supply
      parameters:
        -
          name: id
          in: path
          required: true
          description: Supply's id
          type: integer
        -
          name: supply
          in: body
          required: true
          description: Supply info
          schema:
            type: object
            properties:
              stock_quantity:
                type: number
                format: float
              unit_price:
                type: number
                format: float
              execution_date:
                type: string
                format: date
      responses:
        201:
          description: Insumos agrados correctamente
          schema:
            type: object
            properties:
              execution_date:
                type: string
                format: date
              id:
                type: integer
              cost:
                type: number
                format: float
              quantity:
                type: integer
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /inventory/supplies/{id}/loss/:
    post:
      security:
        - Bearer: []
      description: |
        Decrements a specified quantity for the selected supply
      parameters:
        -
          name: id
          in: path
          required: true
          description: Supply's id
          type: integer
        -
          name: supply
          in: body
          required: true
          description: Supply info
          schema:
            type: object
            properties:
              stock_quantity:
                type: number
                format: float
              execution_date:
                type: string
                format: date
      responses:
        201:
          description: Pérdida de insumos declarada correctamente
          schema:
            type: object
            properties:
              execution_date:
                type: string
                format: date
              id:
                type: integer
              cost:
                type: number
                format: float
              quantity:
                type: integer
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /inventory/supplies/{id}/use/:
    post:
      security:
        - Bearer: []
      description: |
        Decrements a specified quantity for the selected supply
      parameters:
        -
          name: id
          in: path
          required: true
          description: Supply's id
          type: integer
        -
          name: supply
          in: body
          required: true
          description: Supply info
          schema:
            type: object
            properties:
              stock_quantity:
                type: number
                format: float
              execution_date:
                type: string
                format: date
              first_plan:
                type: string
              second_plan:
                type: string
              investment_id:
                type: integer
              description:
                type: string
      responses:
        201:
          description: Pérdida de insumos declarada correctamente
          schema:
            type: object
            properties:
              execution_date:
                type: string
                format: date
              id:
                type: integer
              cost:
                type: number
                format: float
              quantity:
                type: integer
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### SUPPLY END

  ### MAQIUNARIA BEGIN
  /inventory/farm_equipment/:
    get:
      description: |
         List farm equipments for the specified establishment
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: true
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
      responses:
        200:
          description: Maquinaria obtenidos correctamente
          schema:
            type: array
            items:
              properties:
                id:
                  type: integer
                description:
                  type: string
    post:
      security:
        - Bearer: []
      description: |
        Creates farm equipment
      parameters:
        -
          name: farm_equipment
          in: body
          required: true
          description: Farm equipment info
          schema:
            type: object
            properties:
              description:
                type: string
              type:
                type: integer
              establishment_id:
                type: integer
              comments:
                type: string
              plate:
                type: string
              useful_life:
                type: number
                format: float
              residual_value:
                type: number
                format: float
              movement_date:
                type: number
                format: date
              cost:
                type: number
                format: float
      responses:
        201:
          description: Insumos agrados correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /inventory/farm_equipment/{id}/:
    get:
      description: |
         Returns info about specified equipment and his movements
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          type: integer
        -
          name: farm_equipment
          in: body
          required: true
          description: Farm equipment info
          schema:
            type: object
            properties:
              description:
                type: string
              type:
                type: integer
              comments:
                type: string
              plate:
                type: string
              useful_life:
                type: number
                format: float
              residual_value:
                type: number
                format: float
              actual_value:
                type: number
                format: float
              cost:
                type: number
                format: float
              graphic:
                type: object
                properties:
                  series:
                    type: object
                    properties:
                      depreciation:
                        type: array
                        items:
                          type: integer
                  categories:
                    type: array
                    items:
                      type: integer
                  type_graphic:
                    type: string
                  name:
                    type: string
                  yAxis:
                    type: string
      responses:
        200:
          description: Maquinaria actualizada correctamente
          schema:
            $ref: '#/definitions/FarmEquipmentDetail'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    patch:
      description: |
         Returns info about specified equipment and his movements
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          type: integer
      responses:
        200:
          description: Detalle obtenidos correctamente
          schema:
            $ref: '#/definitions/FarmEquipmentDetail'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /inventory/farm_equipment/{id}/loss/:
    post:
      security:
        - Bearer: []
      description: |
        Decrements a specified quantity for the selected farm equipment and creates loss movement
      parameters:
        -
          name: id
          in: path
          required: true
          description: Farm equipment's id
          type: integer
        -
          name: farm_equipment
          in: body
          required: true
          description: Farm equipment info
          schema:
            type: object
            properties:
              movement_date:
                type: number
                format: date
      responses:
        201:
          description: Pérdida de maquinaria declarada correctamente
          schema:
            type: object
            properties:
              execution_date:
                type: string
                format: date
              id:
                type: integer
              cost:
                type: number
                format: float
              quantity:
                type: integer
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /inventory/farm_equipment/types/:
    get:
      description: |
         List farm equipment types for the specified establishment
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: false
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
      responses:
        200:
          description: Tipos de maquinaria obtenidos correctamente
          schema:
            type: array
            items:
              type: object
              properties:
                id:
                  type: integer
                name:
                  type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      security:
        - Bearer: []
      description: |
        Creates farm equipment type
      parameters:
        -
          name: farm_equipment_type
          in: body
          required: true
          description: Farm equipment type info
          schema:
            type: object
            properties:
              name:
                type: string
              establishment_id:
                type: integer

      responses:
        201:
          description: Insumos agrados correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /inventory/farm_equipment/types/{id}/:
    patch:
      description: |
         Updates info about specified equipment type
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          type: integer
      responses:
        200:
          description: Equipamiento modificado correctamente
          schema:
            type: object
            properties:
              name:
                type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    delete:
      description: |
         Deletes specified equipment type
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          type: integer
      responses:
        200:
          description: Equipamiento eliminado correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### MAQUINARIA END


  ### INVENTORY BEGIN
  /inventory/movements/:
    get:
      description: |
         List movements for the specified establishment
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: true
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
        -
          name: quantity
          in: query
          required: false
          type: integer
      responses:
        200:
          description: Movimientos obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/Movement'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /inventory/:
    get:
      description: |
         List movements for the specified establishment
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: true
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
      responses:
        200:
          description: Movimientos obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/Inventory'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### INVENTORY END


  ### INVESTMENT BEGIN
  /investments/:
    get:
      description: |
         List investments for the specified establishment
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: active_only
          in: query
          required: false
          type: boolean
      responses:
        200:
          description: Inversiones obtenidas correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/Investment'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      security:
        - Bearer: []
      description: |
        Creates Investment
      parameters:
        -
          name: investment
          in: body
          required: true
          description: investment info
          schema:
            $ref: '#/definitions/InvestmentPOST'
      responses:
        201:
          description: Insumos agrados correctamente
          schema:
            $ref: '#/definitions/Investment'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /investments/{id}/:
    patch:
      security:
        - Bearer: []
      description: |
        Updates Investment
      parameters:
        -
          name: id
          in: path
          required: true
          description: Investment's id
          type: integer
        -
          name: investment
          in: body
          required: true
          description: investment info
          schema:
            $ref: '#/definitions/InvestmentDetail'
      responses:
        201:
          description: Insumos agrados correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    get:
      security:
        - Bearer: []
      description: |
        Updates Investment
      parameters:
        -
          name: id
          in: path
          required: true
          description: Investment's id
          type: integer
        -
          name: investment
          in: body
          required: true
          description: investment info
          schema:
            $ref: '#/definitions/InvestmentDetail'
      responses:
        201:
          description: Insumos agrados correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### INVESTMENT END

  ### Cajas BEGIN
  /savings_banks/:
    get:
      description: |
         List savings banks for the specified establishment
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: true
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
        -
          name: reduced
          in: query
          required: false
          type: boolean
      responses:
        200:
          description: Cajas obtenidas correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/SavingsBank'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      security:
        - Bearer: []
      description: |
        Creates Savings bank
      parameters:
        -
          name: savings_bank
          in: body
          required: true
          description: savings bank info
          schema:
            $ref: '#/definitions/SavingsBankPOST'
      responses:
        201:
          description: Caja agregada correctamente
          schema:
            $ref: '#/definitions/SavingsBank'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /savings_bank/{id}/:
    patch:
      security:
        - Bearer: []
      description: |
        Updates Savinsg bank
      parameters:
        -
          name: id
          in: path
          required: true
          description: Savings bank's id
          type: integer
        -
          name: savings_bank
          in: body
          required: true
          description: Savings bank info
          schema:
            $ref: '#/definitions/SavingsBankPATCH'
      responses:
        201:
          description: Caja modificada correctamente
          schema:
            $ref: '#/definitions/SavingsBankDetail'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    get:
      security:
        - Bearer: []
      description: |
        Updates Savings bank
      parameters:
        -
          name: id
          in: path
          required: true
          description: Investment's id
          type: integer
        -
          name: investment
          in: body
          required: true
          description: investment info
          schema:
            $ref: '#/definitions/SavingsBankDetail'
      responses:
        201:
          description: Caja obtenida correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /savings_bank/{id}/movements/:
    post:
      security:
        - Bearer: []
      description: |
        Updates Savinsg bank
      parameters:
        -
          name: id
          in: path
          required: true
          description: Savings bank's id
          type: integer
        -
          name: movement
          in: body
          required: true
          description: Savings bank info
          schema:
            properties:
              type:
                type: integer
              ammount:
                type: number
                format: float
              description:
                type: string
              execution_date:
                type: string
                format: float
      responses:
        201:
          description: Caja modificada correctamente
          schema:
            properties:
              type:
                type: string
              ammount:
                type: string
              description:
                type: string
              execution_date:
                type: string
                format: float
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### CAJAS END
  /tickets/:
    get:
      description: |
         List tickets for the specified establishment
      security:
        - Bearer: []
      parameters:
        -
          name: establishment_id
          in: query
          required: true
          type: integer
        -
          name: company_id
          in: query
          required: true
          type: integer
        -
          name: crea_group_id
          in: query
          required: true
          type: integer
      responses:
        200:
          description: Boletas obtenidas correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/Ticket'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      security:
        - Bearer: []
      description: |
        Creates Ticket
      parameters:
        -
          name: ticket
          in: body
          required: true
          description: ticket info
          schema:
            $ref: '#/definitions/TicketPOST'
      responses:
        201:
          description: Caja agregada correctamente
          schema:
            $ref: '#/definitions/Ticket'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /tickets/{id}/:
    patch:
      security:
        - Bearer: []
      description: |
        Updates Ticket
      parameters:
        -
          name: id
          in: path
          required: true
          description: Ticket's id
          type: integer
        -
          name: ticket
          in: body
          required: true
          description: Ticket info
          schema:
            $ref: '#/definitions/TicketPATCH'
      responses:
        201:
          description: Boleta modificada correctamente
          schema:
            $ref: '#/definitions/TicketDetail'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    get:
      security:
        - Bearer: []
      description: |
        Updates Ticket
      parameters:
        -
          name: id
          in: path
          required: true
          description: Ticket's id
          type: integer
        -
          name: ticket
          in: body
          required: true
          description: ticket info
          schema:
            $ref: '#/definitions/TicketDetail'
      responses:
        201:
          description: Boleta obtenida correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### BOLETAS BEGIN
  
  ### BOLETAS END

  ### GIS WSs
  /gis/encode_kml/:
    get:
      description: |
        Se le envia una geojson y retorna el mismo como un archivo en KML, donde el Id de cada particion se transforma en el nombre de cada placeholder. Puede incluir cierta metadata en ExtraData.
        Debe ser compatible con los KML creados por google-earth (pero no compatible con todos los KML que google-earth puede levantar, en caso de problemas cargar este KML en google-earth y volver a exportarlo, como modo de normalizacion).
        Si varios placeholders del KML tienen igual nombre, estos se fundiran y se interpretaran como una sola cosa.
      consumes:
        - application/json
      produces:
        - application/vnd.google-earth.kml+xml
      parameters:
        -
          name: shapes
          in: body
          description: Shapes
          required: true
          schema:
            $ref: '#/definitions/GEOJsonFeatureCollection'
      responses:
        200:
          description: Traducción a GeoJson OK
          schema:
            type: file
        400:
          description: Error del cliente
        500:
          description: Error del servidor

  /gis/decode_kml/:
    get:
      description: |
        Se le pasa un archivo KML con un conjunto de particiones y retorna el Geojson correspondiente, tomando el nombre de cada placeholder como Id de cada particion (y feature collection).
      consumes:
        - multipart/form-data
      produces:
        - application/json
      parameters:
        -
          name: kml_file
          in: formData
          description: El archivo KML a interpretar
          required: true
          type: file
      responses:
        200:
          description: 'KML traducido OK'
          schema:
            $ref: '#/definitions/GEOJsonFeatureCollection'
        400:
          description: Error del cliente
        500:
          description: Error del servidor

  /gis/partition_selection/:
    get:
      description: |
        De modo similar a partition_creation, este WS crea y funde particiones.
        Funde todas las particiones CONTENIDAS (a diferencia de partition_creation) por el poligono de entrada "blade" en un nuevo multipoligono (geocerca) con el Id de la "figura activa" (active_sahpe_id).
        Retorna el conjunto de todas las particiones nuevas (incluso las particiones vacias de Id ya existentes como collecciones vacias).
        Opcionalmente esta operación se realiza sin provocar un resultado fuera de otra geocerca que marca los limites "Bound" (siempre se termina intersectando el resultado contra Bound).
        Puede modelarse la particion que no partenece a ninguna particion anterior (aka residual) asignandole un Id no usado con anterioridad, típicamente el Id = -1, de este modo también puede lograrse eliminar una particion asignando como figura activa a la de Id = -1
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: active_shape_id
          in: body
          description: El Id de la figura a la cual se le agrega la particion
          required: true
          schema:
            type: object
            properties:
              zoom_lvl:
                type: integer
              active_shape_id:
                type: string
              blade:
                $ref: '#/definitions/GEOJsonFeatureCollection'
              bound:
                $ref: '#/definitions/GEOJsonFeatureCollection'
              shapes:
                $ref: '#/definitions/GEOJsonFeatureCollection'
      responses:
        200:
          description: Conjunto de particiones luego de fundir, simplificar y normalizar las diferentes particiones de entrada segun el blade y la particion activa. Trae además un valor en properties llamado area_ratio para cada feature f_i resultante que representa area_de_f_i/area_de_feature_bound (siempre el cálculo del área se considera sobre las figuras fundidas, que es como las retorna este WS).
          schema:
            type: object
            items:
              $ref: '#/definitions/GEOJsonFeatureCollection'
          examples:
            {
              "shapes": {
                  "type": "FeatureCollection",
                  "features": [{
                      "geometry": {
                          "type": "MultiPolygon",
                          "coordinates": [
                              [
                                  [
                                      [41, 71],
                                      [42, 71],
                                      [42, 72],
                                      [41, 72],
                                      [41, 71]
                                  ]
                              ]
                          ]
                      },
                      "type": "Feature",
                      "properties": {
                          "id": "2"
                      }
                  }, {
                      "geometry": {
                          "type": "MultiPolygon",
                          "coordinates": [
                              [
                                  [
                                      [40, 70],
                                      [40, 74],
                                      [44, 74],
                                      [44, 70],
                                      [40, 70]
                                  ]
                              ]
                          ]
                      },
                      "type": "Feature",
                      "properties": {
                          "id": "1"
                      }
                  }]
              },
              "blade": {
                  "type": "FeatureCollection",
                  "features": [{
                      "geometry": {
                          "type": "MultiPolygon",
                          "coordinates": [
                              [
                                  [
                                      [40, 70],
                                      [40, 74],
                                      [44, 74],
                                      [44, 70],
                                      [40, 70]
                                  ]
                              ]
                          ]
                      },
                      "type": "Feature",
                      "properties": {
                          "id": "1"
                      }
                  }]
              },
              "bound": {
                  "type": "FeatureCollection",
                  "features": [{
                      "geometry": {
                          "type": "MultiPolygon",
                          "coordinates": [
                              [
                                  [
                                      [40, 70],
                                      [50, 70],
                                      [50, 80],
                                      [40, 80],
                                      [40, 70]
                                  ]
                              ]
                          ]
                      },
                      "type": "Feature",
                      "properties": {
                          "id": "0"
                      }
                  }]
              }
          }
        400:
          description: Error del cliente (posiblemente en el formateo, ya que no hay otros errores semanticos posibles)
        500:
          description: Error del servidor

  /gis/partition_creation/:
    get:
      description: |
        De modo similar a partition_selection, este WS crea y funde particiones.
        Crea fundiendo y cortando una nueva particion definida por el poligono de entrada "blade" y el Id de la "figura activa" (active_sahpe_id). Roba superficie de cualquier otra particion con la que pudiera intersectarse
        Retorna el conjunto de todas las particiones nuevas (incluso las particiones vacias de Id ya existentes como collecciones vacias).
        Puede crear nuevas particiones si el Id de figura activa no se encontraba entre las particiones.
        Opcionalmente esta operación se realiza sin provocar un resultado fuera de otra geocerca que marca los limites "Bound" (siempre se termina intersectando el resultado contra Bound).
        Puede modelarse la particion que no partenece a ninguna particion anterior (aka residual) asignandole un Id no usado con anterioridad, típicamente el Id = -1, de este modo también puede lograrse eliminar una particion asignando como figura activa a la de Id = -1
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: active_shape_id
          in: body
          description: El Id de la figura a la cual se le agrega la particion
          required: true
          schema:
            type: object
            properties:
              zoom_lvl:
                type: integer
              active_shape_id:
                type: string
              blade:
                $ref: '#/definitions/GEOJsonFeatureCollection'
              bound:
                $ref: '#/definitions/GEOJsonFeatureCollection'
              shapes:
                # description: Conjunto de multipoligonos (geocercas) que representan una posible particion de una region.
                $ref: '#/definitions/GEOJsonFeatureCollection'
      responses:
        200:
          description: Conjunto de particiones luego de fundir, simplificar y normalizar las diferentes particiones de entrada segun el blade y la particion activa. Trae además un valor en properties llamado area_ratio para cada feature f_i resultante que representa area_de_f_i/area_de_feature_bound (siempre el cálculo del área se considera sobre las figuras fundidas, que es como las retorna este WS).
          schema:
            type: object
            items:
              $ref: '#/definitions/GEOJsonFeatureCollection'
          examples:
            {
              "shapes": {
                  "type": "FeatureCollection",
                  "features": [{
                      "geometry": {
                          "type": "MultiPolygon",
                          "coordinates": [
                              [
                                  [
                                      [40, 70],
                                      [40, 74],
                                      [44, 74],
                                      [44, 70],
                                      [40, 70]
                                  ]
                              ]
                          ]
                      },
                      "type": "Feature",
                      "properties": {
                          "id": "2"
                      }
                  }, {
                      "geometry": {
                          "type": "MultiPolygon",
                          "coordinates": [
                              [
                                  [
                                      [40, 70],
                                      [50, 70],
                                      [50, 80],
                                      [40, 80],
                                      [40, 70]
                                  ]
                              ]
                          ]
                      },
                      "type": "Feature",
                      "properties": {
                          "id": "1"
                      }
                  }]
              },
              "blade": {
                  "type": "FeatureCollection",
                  "features": [{
                      "geometry": {
                          "type": "MultiPolygon",
                          "coordinates": [
                              [
                                  [
                                      [40, 70],
                                      [42, 70],
                                      [42, 74],
                                      [40, 74],
                                      [40, 70]
                                  ]
                              ]
                          ]
                      },
                      "type": "Feature",
                      "properties": {
                          "id": "1"
                      }
                  }]
              },
              "bound": {
                  "type": "FeatureCollection",
                  "features": [{
                      "geometry": {
                          "type": "MultiPolygon",
                          "coordinates": [
                              [
                                  [
                                      [40, 70],
                                      [50, 70],
                                      [50, 80],
                                      [40, 80],
                                      [40, 70]
                                  ]
                              ]
                          ]
                      },
                      "type": "Feature",
                      "properties": {
                          "id": "0"
                      }
                  }]
              }
          }
        400:
          description: Error del cliente (posiblemente en el formateo, ya que no hay otros errores semanticos posibles)
        500:
          description: Error del servidor
  ### GIS WSs END

definitions:
  ### USERS definitions:
  Permissions:
    type: integer
  User:
    type: object
    properties:
      email:
        type: string
      name:
        type: string
      role:
        enum:
          - ADMINISTRADOR
          - ADMINISTRATIVO SISTEMA
          - ASESOR
          - PRODUCTOR
          - ADMINISTRATIVO PRODUCTOR
          - INVITADO
        type: string
      temporary:
        type: boolean
      end_date:
        type: string
        format: date
      permissions:
        type: object
        properties:
          indicators:
            type: object
            properties:
              summary:
                $ref: '#/definitions/Permissions'
              management:
                $ref: '#/definitions/Permissions'
              sustentability:
                $ref: '#/definitions/Permissions'
              margin:
                $ref: '#/definitions/Permissions'
              detail:
                $ref: '#/definitions/Permissions'
      establishments:
        type: array
        items:
          type: integer
  UserPATCH:
    type: object
    properties:
      name:
        type: string
      departament:
        type: integer
      phone_number:
        type: string
      address:
        type: string
      establishments:
        type: array
        items:
          type: integer
  UserLogin:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
      email:
        type: string
      name:
        type: string
      role:
        enum:
          - ADMINISTRADOR
          - ADMINISTRATIVO SISTEMA
          - ASESOR
          - PRODUCTOR
          - ADMINISTRATIVO PRODUCTOR
          - INVITADO
        type: string
      departament:
        type: integer
      phone_number:
        type: string
      address:
        type: string
      temporary:
        type: boolean
      end_date:
        type: string
        format: date
      permissions:
        type: object
        properties:
          indicators:
            type: object
            properties:
              summary:
                $ref: '#/definitions/Permissions'
              comparative:
                $ref: '#/definitions/Permissions'
              sustentability:
                $ref: '#/definitions/Permissions'
              margin:
                $ref: '#/definitions/Permissions'
              details:
                $ref: '#/definitions/Permissions'
      establishments:
        type: object
        properties:
          id:
            type: integer
          name:
            type: string
  UserFormList:
    type: object
    properties:
      departaments:
        type: array
        items:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
      roles:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      permissions:
        type: object
        properties:
          summary:
            type: object
            properties:
              description:
                type: string
              values:
                type: object
                properties:
                  sin_permiso:
                    type: integer
                  puede_ver:
                    type: integer
                  puede_editar:
                    type: integer
  ### USERS DEFINITIONS END

  ### ADMINISTRATION DEFINITIONS
  Establishment:
    type: object
    properties:
      id:
        type: integer
      name:
        type: string
      active:
        type: boolean
      crea_group:
        $ref: '#/definitions/CreaGroup'
      coneat:
        type: integer
      location:
        type: object
        properties:
          latitude:
            type: number
            format: float
          longitude:
            type: number
            format: float
      share_fucrea:
        type: boolean
      share_group:
        type: boolean
      initilization_stage:
        enum:
            - initialized
            - uninitialized
        type: string
      padrons:
        type: array
        items:
          $ref: '#/definitions/Padron'
      lots:
        type: array
        items:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
      characterizations:
        type: array
        items:
          $ref: '#/definitions/CharacterizationPOSTList'
  EstablishmentPATCH:
    type: object
    properties:
      name:
        type: string
      active:
        type: boolean
      coneat:
        type: integer
      location:
        type: object
        properties:
          latitude:
            type: number
            format: float
          longitude:
            type: number
            format: float
      share_fucrea:
        type: boolean
      share_group:
        type: boolean
      padrons:
        type: array
        items:
          $ref: '#/definitions/PadronPATCH'
      zone:
        type: integer
  EstablishmentBrief:
    type: object
    properties:
      company:
        type: object
        properties:
          id:
            type: integer
          name:
            type: string
          establishments:
            type: array
            items:
              type: object
              properties:
                id:
                  type: integer
                name:
                  type: string
                closed_exercises:
                  type: array
                  items:
                    type: integer
  CharacterizationPOSTList:
    type: object
    properties:
      agriculture:
        type: array
        items:
          type: integer
      sistema_producto_vacuno:
        type: array
        items:
          type: integer
      sistema_producto_ovino:
        type: array
        items:
          type: integer
      forestacion_comercial:
        type: array
        items:
          type: integer
      evolucion_propiedad_empresas_familiares:
        type: array
        items:
          type: integer
      edad_decisor:
        type: array
        items:
          type: integer
      riego:
        type: array
        items:
          type: integer
      nivel_instruccion_decisor:
        type: array
        items:
          type: integer
      residencia_decisor:
        type: array
        items:
          type: integer
      dias_semana_decisor:
        type: array
        items:
          type: integer
      geographic_zone:
        type: array
        items:
          type: integer
          description: "Applies only in indicators filtering"
      category:
        type: array
        items:
          type: integer
  IndicatorFilterPOSTList:
    type: object
    properties:
      comparative_group:
        type: integer
      ordering_type:
        type: integer
      indicator:
        type: object
        properties:
          type:
            type: string
          name:
            type: string
  CharacterizationFormList:
    type: object
    properties:
      agriculture:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      sistema_producto_vacuno:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      sistema_producto_ovino:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      forestacion_comercial:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      evolucion_propiedad_empresas_familiares:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      riego:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      nivel_instruccion_decisor:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      residencia_decisor:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      dias_semana_decisor:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      geographic_zone:
        type: array
        items:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
      category:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
  IndicatorFilterFormList:
    type: object
    properties:
      closed_exercises:
        type: array
        items:
          type: integer
      indicator_types:
        type: object
        properties:
          value:
            type: string
          description:
            type: string
      filters:
        type: object
        properties:
          comparative_groups:
            type: array
            items:
              type: object
              properties:
                value:
                  type: integer
                description:
                  type: string
          ordering_type:
            type: array
            items:
              type: object
              properties:
                value:
                  type: integer
                description:
                  type: string
          indicators:
            type: array
            items:
              type: object
              properties:
                value:
                  type: integer
                description:
                  type: string
                type:
                  type: string
                type_description:
                  type: string
                kindof:
                  type: integer
  CharacterizationsAndFiltersFormList:
    type: object
    properties:
      characterizations_names:
        type: object
        properties:
          agriculture:
            type: string
          edad_decisor:
            type: string
          sistema_producto_vacuno:
            type: string
          sistema_producto_ovino:
            type: string
          nivel_instruccion_decisor:
            type: string
          residencia_decisor:
            type: string
          dias_semana_decisor:
            type: string
          riego:
            type: string
          forestacion_comercial:
            type: string
          evolucion_propiedad_empresas_familiares:
            type: string
          category:
            type: string
      characterizations:
        $ref: '#/definitions/CharacterizationFormList'
      zones:
        type: object
        properties:
          id:
            type: integer
          name:
            type: string
  Lot:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
      description:
        type: string
      code:
        type: string
      area:
        type: number
        format: float
      productive_area:
        type: number
        format: float
      coneat:
        type: integer
      posession:
        enum:
          - PROPIO
          - AJENO
        type: string
      leasing:
        type: object
        properties:
          start_date:
            type: string
            format: date
          end_date:
            type: string
            format: date
          cost:
            type: number
            format: float
  # LotPOST:
  #   type: object
  #   properties:
  #     description:
  #       type: string
  #     code:
  #       type: string
  #     area:
  #       type: number
  #       format: float
  #     productive_area:
  #       type: number
  #       format: float
  #     coneat:
  #       type: integer
  #     posession:
  #       enum:
  #         - PROPIO
  #         - AJENO
  #       type: string
  #     leasing:
  #       type: object
  #       properties:
  #         start_date:
  #           type: string
  #           format: date
  #         end_date:
  #           type: string
  #           format: date
  #         cost:
  #           type: number
  #           format: float
  LotPATCH:
    type: object
    properties:
      description:
        type: string
      code:
        type: string
      area:
        type: number
        format: float
      productive_area:
        type: number
        format: float
      coneat:
        type: integer
      posession:
        enum:
          - PROPIO
          - AJENO
        type: string
      leasing:
        type: object
        properties:
          start_date:
            type: string
            format: date
          end_date:
            type: string
            format: date
          cost:
            type: number
            format: float
  LotInEstablishmentPOST:
    type: object
    properties:
      description:
        type: string
      code:
        type: string
      area:
        type: number
        format: float
      productive_area:
        type: number
        format: float
      coneat:
        type: integer
      posession:
        enum:
          - PROPIO
          - AJENO
        type: string
      leasing:
        type: object
        properties:
          start_date:
            type: string
            format: date
          end_date:
            type: string
            format: date
          cost:
            type: number
            format: float
  CreaGroup:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
      name:
        type: string
      establishments:
        type: array
        items:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
  CreaGroupDeep:
    type: object
    properties:
      crea_group:
        type: object
        properties:
          id:
            type: integer
          name:
            type: string
          establishments:
            type: array
            items:
              type: object
              properties:
                id:
                  type: integer
                name:
                  type: string
                closed_exercises:
                  type: array
                  items:
                    type: integer
  Company:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
      fantasy_name:
        type: string
      business_name:
        type: string
      rut:
        type: string
      establishments:
        type: array
        items:
          type: integer
  CompanyPOST:
    type: object
    properties:
      fantasy_name:
        type: string
      business_name:
        type: string
      rut:
        type: string
      establishments:
        type: array
        items:
          type: integer
  Department:
    type: object
    properties:
      id:
        type: integer
      name:
        type: string
  Padron:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
      padron_number:
        type: string
      department:
        $ref: '#/definitions/Department'
  PadronPATCH:
    type: object
    properties:
      padron_number:
        type: string
      department:
        type: integer
  Provider:
    type: object
    properties:
      id:
        type: integer
      fantasy_name:
        type: string
      business_name:
        type: string
      rut:
        type: string
      establishments:
        type: array
        items:
          type: object
          properties:
            name:
              type: string
            id:
              type: integer
  ProviderPOST:
    type: object
    properties:
      id:
        type: integer
      fantasy_name:
        type: string
      business_name:
        type: string
      rut:
        type: string
      type:
        type: integer
      establishments:
        type: array
        items:
          type: integer
  ProviderPATCH:
    type: object
    properties:
      fantasy_name:
        type: string
      business_name:
        type: string
      rut:
        type: string
      type:
        type: integer
  ### ADMINISTRATION DEFINITIONS END

  ### INDICATORS DEFINITIONS
  IndicatorTree:
    type: object
    properties:
      indicators_compared:
        type: integer
      indicators_list:
        type: array
        items:
          type: object
          properties:
            tree:
              type: object
              properties:
                name:
                  type: string
                short_name:
                  type: string
                value:
                  type: number
                  format: float
                children:
                  type: array
                  items:
                    $ref: '#/definitions/IndicatorTree'
            indicators_quantity:
              type: integer
  IndicatorDetailList:
    type: object
    properties:
      comparative:
        type: object
        properties:
          description:
            type: string
      indicators:
        type: object
        properties:
          producto_bruto_total:
            type: number
            format: float
          producto_bruto_vacuno:
            type: number
            format: float
      date_consulted:
        type: string
        format: date
      indicators_compared:
        type: integer
      id:
        type: string
  ### INDICATORS DEFINITIONS END

  ### LAND USE DEFINITIONS
  MonthlyLandUse:
    type: object
    properties:
      lot:
        type: object
        properties:
          id:
            type: integer
          description:
            type: string
          hectares:
            type: integer
      establishment:
        type: string
      land_uses:
        type: array
        items:
          type: object
          properties:
              month:
                type: integer
              productive_hectares:
                type: integer
              crop:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
      closed:
                type: boolean
  LandUseFormList:
    type: object
    properties:
      months:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            name:
              type: string
      crops:
        type: object
        properties:
          id:
            type: integer
          name:
            type: string
          children:
            type: array
            items:
              $ref: '#/definitions/LandUseFormList'
          duration:
            type: integer
  ### LAND USE DEFINITIONS END

  ### SUPPLY DEFINITIONS
  #Supply:
  #  type: object
  #  properties:
  #    id:
  #      type: integer
  #    stock_quantity:
  #      type: number
  #      format: float
  #    name:
  #      type: string
  #    type:
  #      type: string
  #    establishment_name:
  #      type: string
  Movement:
    type: object
    properties:
      id:
        type: integer
      descripcion:
        type: string
      quantity:
        type: number
        format: float
      execution_date:
        type: string
        format: date
      movement_type:
        type: string
      establishment_name:
        type: string
      cost:
        type: number
        format: float
      inventory_type:
        type: string
  AccountPlans:
    type: object
    properties:
      1st_account_plan:
        type: array
        items:
          type: object
          properties:
            name:
              type: string
            description:
              type: string
            applies_second_plan:
              type: boolean
            applies_investment:
              type: boolean
            children:
              type: array
              items:
                type: object
      2nd_account_plan:
        type: array
        items:
          type: object
          properties:
            name:
              type: string
            description:
              type: string
            children:
              type: array
              items:
                type: object
  SupplyDetail:
    type: object
    properties:
      id:
        type: integer
      stock_quantity:
        type: string
      description:
        type: string
      type:
        type: string
      establishment_name:
        type: string
      unit:
        type: string
      movements:
        type: array
        items:
          type: object
          properties:
            id:
              type: integer
            quantity:
              type: number
              format: float
            execution_date:
              type: string
              format: date
            movement_type:
              type: string
            cost:
              type: number
              format: float
      comments:
        type: string
      value:
        type: number
        format: float
      nitrogen_concentration:
        type: number
        format: float
      sulfur_concentration:
        type: number
        format: float
      phosphorus_concentration:
        type: number
        format: float
      active_components:
        type: array
        items:
          type: object
          properties:
            name:
              type: string
            concentration:
              type: number
              format: float
  FarmEquipmentDetail:
    type: object
    properties:
      id:
        type: integer
      description:
        type: string
      type:
        type: string
      establishment_name:
        type: string
      comments:
        type: string
      plate:
        type: string
      depreciation:
              type: number
              format: float
      useful_life:
              type: number
              format: float
      residual_value:
              type: number
              format: float
      movements:
        type: array
        items:
          type: object
          properties:
            id:
              type: integer
            execution_date:
              type: string
              format: date
            movement_type:
              type: string
            cost:
              type: number
              format: float
  Inventory:
    type: object
    properties:
      id:
        type: integer
      description:
        type: string
      establishment_name:
        type: string
      inventory_type:
        type: string
      category:
        type: string
      value:
        type: number
        format: float
      quantity:
        type: string
      warning:
        type: boolean
      has_stock:
        type: boolean
  ### SUPPLY DEFINITIONS END

  ### INVESTMENTS DEFINITIONS START
  Investment:
    type: object
    properties:
      id:
        type: integer
      description:
        type: string
      type:
        type: integer
      establishment_name:
        type: string
      end_date:
        type: string
        format: date
  InvestmentDetail:
    type: object
    properties:
      description:
        type: string
      category:
        type: string
      establishment_name:
        type: string
      total_cost:
        type: number
        format: float
      start_date:
        type: string
        format: date
      comments:
        type: string
      lots:
        type: array
        items:
          type: object
          properties:
            id:
              type: integer
            description:
              type: string
            area:
              type: number
              format: float
      depreciation_percentages:
        type: array
        items:
          type: object
          properties:
            percentage:
              type: number
              format: float
            closed_exercise:
              type: boolean
            depreciation_value:
              type: integer
  InvestmentPOST:
    type: object
    properties:
      description:
        type: string
      category:
        type: integer
      establishment_id:
        type: integer
      start_value:
        type: integer
      duration:
        type: integer
      comments:
        type: string
      start_date:
        type: string
        format: date
      lots:
        type: array
        items:
          type: integer
      depreciation_percentages:
        type: array
        items:
          type: integer
  InvestmentPATCH:
    type: object
    properties:
      description:
        type: string
      comments:
        type: string
  ### INVESTMENTS DEFINITIONS END

  ### SAVINGS BANKS DEFINITIONS START
  SavingsBank:
    type: object
    properties:
      id:
        type: integer
      description:
        type: string
      category:
        type: string
      current_savings:
        type: string
      curency:
        type: string
  SavingsBankDetail:
    type: object
    properties:
      id:
        type: integer
      description:
        type: string
      category:
        type: string
      current_savings:
        type: string
      currency:
        type: string
      establishment:
        type: string
      movements:
        type: array
        items:
          type: object
          properties:
            ammount:
              type: string
            description:
              type: string
            type:
              type: string
            execution_date:
              type: string
              format: date
  SavingsBankPOST:
    type: object
    properties:
      description:
        type: string
      category:
        type: integer
      establishment:
        type: integer
      current_savings:
        type: number
        format: float
      currency:
        type: integer
  SavingsBankPATCH:
    type: object
    properties:
      description:
        type: string
      category:
        type: integer
      current_savings:
        type: number
        format: float
      currency:
        type: integer
  ### SAVINGS BANK DEFINITIONS END

  ### TICKETS DEFINITIONS START
  Ticket:
    type: object
    properties:
      id:
        type: integer
      description:
        type: string
      type:
        type: string
      payment_type:
        type: string
      ammount:
        type: number
        format: float
      pending_ammount:
        type: number
        format: float
      currency:
        type: string
      last_payment_date:
        type: string
        format: date
      establishment:
        type: string
  TicketDetail:
    type: object
    properties:
      id:
        type: integer
      description:
        type: string
      ticket_number:
        type: string
      provider:
        type: integer
      payment_type:
        type: integer
      ammount:
        type: number
        format: float
      tax_ammount_percentage:
        type: number
        format: float
      emition_date:
        type: string
        format: date
      payments_ammount:
        type: integer
      lots:
        type: array
      inventory:
        type: array
      generic_buys:
        type: array
      establishment:
        type: integer
  TicketPOST:
    type: object
    properties:
      description:
        type: string
      ticket_number:
        type: string
      provider:
        type: integer
      payment_type:
        type: integer
      ammount:
        type: number
        format: float
      tax_ammount_percentage:
        type: number
        format: float
      emition_date:
        type: string
        format: date
      payments_ammount:
        type: integer
      lots:
        type: array
      inventory:
        type: array
      generic_buys:
        type: array
      establishment:
        type: integer
  TicketPATCH:
    type: object
    properties:
      description:
        type: string
  ### TICKETS DEFINITIONS END

  ### GIS DEFINITIONS
  GEOJsonFeature:
    # como en https://developers.google.com/maps/documentation/javascript/3.exp/reference#Data, el metodo toGeoJson
    type: object

  GEOJsonFeatureCollection:
    # como en https://developers.google.com/maps/documentation/javascript/3.exp/reference#Data, el metodo toGeoJson
    type: object

  ### GIS DEFINITIONS END