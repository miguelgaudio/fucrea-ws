swagger: '2.0'

info:
  version: "1"
  title: fucrea

host: basic-auth-server.herokuapp.com
schemes:
  - https
securityDefinitions:
  Bearer:
    type: apiKey
    name: Authorization
    in: header
  # OauthSecurity:
  #   type: oauth2
  #   flow: accessCode
  #   authorizationUrl: 'https://oauth.simple.api/authorization'
  #   tokenUrl: 'https://oauth.simple.api/token'
  #   scopes:
  #     admin: Admin scope
  #     user: User scope
  #     media: Media scope
  # OauthSecurity:
  #   description: New Oauth security system. Do not use MediaSecurity or LegacySecurity.
  #   type: oauth2
  #   flow: accessCode
  #   authorizationUrl: 'https://oauth.simple.api/authorization'
  #   tokenUrl: 'https://oauth.simple.api/token'
  #   scopes:
  #     admin: Admin scope
  #     user: User scope
  
#responseCodesDefinition:
#  200: 
#    descripcion: Success, no modifica estados de base de datos
#  201: 
#    descripcion: Success, crea nuevo objeto en base  de datos
#  204:
#    descripcion: Success, modifica un objeto de base de datos
#  400:
#    descripcion: Error proveniente del cliente
#  401:
#    descripcion: Usuario no autorizado para la accion por falta de credenciales
#  403:
#    descripcion: Usuario no autorizado por falta de permisos
#  404:
#    descripcion: Recurso no encontrado
#  500:
#    descripcion: Error proveniente del servidor

paths:
  ### USERS SERVICES
  /users/:
    # quizas esto es otro endpoint "invitations" 
    post:
      summary: Sends user an email invitation
      description: |
        Sends an invitation via mail to the described user
      consumes:
        - application/json
      produces:
        - application/json
      security:
        - Bearer: []
      parameters:
        -
          name: user
          in: body
          description: User's info
          required: false
          schema:
            $ref: '#/definitions/User'
      responses:
        201:
          description: Usuario creado correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    get:
      description: |
        Lista las invitaciones y usuarios de mis establecimientos
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        200:
          description: Usuarios obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/User'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /users/{id}/:
    patch:
      description: |
        Updates user's info
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: id
          in: path
          required: true
          description: User's id 
          type: integer 
        -
          name: user
          in: body
          description: User's info
          required: false
          schema:
            $ref: '#/definitions/User'
      responses:
        204:
          description: Usuario modificado correctamente 
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Usuario no enontrado
        500:
          description: Error del servidor
    delete:
      description: |
        Deletes subordinate user
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: id
          in: path
          required: true
          description: User's id 
          type: integer  
      responses:
        200:
          description: Usuarios obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/User'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Usuario no enontrado
        500:
          description: Error del servidor
  /users/confirm/:
    patch:
      description: |
        Sends supplied registration token to confirm user's registration
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: registration_data
          in: body
          required: true
          description: Authentication token sent by email to registrating user and user's password
          schema:
            properties:
              password:
                type: string
              registration_token:
                type: string
      responses:
        204:
          description: Registro de usuario confirmado correctamente      
        400:
          description: Error del cliente
        500:
          description: Error del servidor
  /users/change_password/:
    patch:
      description: |
        Changes password for described user
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: new_password
          in: formData
          required: true
          description: New user's password
          type: string
        -
          name: old_password
          in: formData
          required: true
          description: New user's password
          type: string
      responses:
        204:
          description: Contraseña actualizada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Usuario no enontrado
        500:
          description: Error del servidor
  /users/invite/:
    patch:
      description: |
        Resends a mail invitation to a created user
      security:
        - Bearer: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: id
          in: formData
          required: true
          description: User to send invitation id
          type: integer
      responses:
        204:
          description: Invitaión enviada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Usuario no enontrado
        500:
          description: Error del servidor        
  /users/login/:
    post:
      description: |
        User logs in the platform
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        -
          name: credentials
          in: body
          description: User's login credentials
          required: true
          schema:
            properties:
              email:
                type: string
              password:
                type: string
      responses:
        200:
          description: Usuario autenticado con éxito
          schema:
            type: object
            properties:
              access_token:
                type: string
              user:
                $ref: '#/definitions/User'
        400:
          description: Error del cliente
        404:
          description: Usuario no enontrado
        500:
          description: Error del servidor
  /users/logout/:
    post:
      description: |
        User logs out of the platform
      security:
        - Bearer: []
      produces:
        - application/json
      responses:
        200:
          description: 
            Usuario desautenticado con éxito 
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        404:
          description: Recurso no enontrado
  ### USERS SERVICES END
  
  ### ADMINISTRATION SERVICES
  /establishments/:
     get:
       description: |
         List establishments
       security:
        - Bearer: []
       responses:
         200:
           description: Establecimientos obtenidos correctamente
           schema:
             type: array
             items:
              $ref: '#/definitions/Establishment'
         400:
          description: Error del cliente
         401:
          description: Usuario no autenticado
         403:
          description: El usuario no tiene permisos para realizar la acción
         500:
          description: Error del servidor
  /establishments/unasigned/:
    get:
      description: |
         List unasigned establishments
      security:
        - Bearer: []
      responses:
        200:
          description: Establecimientos obtenidos correctamente
          schema:
            type: array
            items:
              type: object
              properties:
                id: 
                  type: integer
                name: 
                  type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor        
  /establishments/{id}/:
    patch:
       description: |
          Updates establishment's info
       security:
        - Bearer: []
       consumes:
        - application/json
       produces:
        - application/json
       parameters:
        -
          name: establishment
          in: body
          description: Establishment info
          required: true
          schema: 
            $ref: '#/definitions/EstablishmentPATCH'
        -
          name: id
          in: path
          description: Establishment's id
          required: true
          type: integer
       responses:
         204:
           description: Establecimiento actualizado correctamente
         400:
          description: Error del cliente
         401:
          description: Usuario no autenticado
         403:
          description: El usuario no tiene permisos para realizar la acción
         404:
          description: Establecimiento no enontrado
         500:
          description: Error del servidor
  /establishments/{id}/characterizations/:
    post:
      description: |  
        Create new establishment's categorization
      security:
        - Bearer: []
      parameters:
        - 
          name: characterization
          in: body
          required: true
          description: Characterization info
          schema:
            $ref: '#/definitions/CharacterizationPOSTList'
        - 
          name: id
          in: path
          required: true
          description: Establishment's id
          type: integer
      responses:
         201:
           description: Categorización creada con éxito
         400:
          description: Error del cliente
         401:
          description: Usuario no autenticado
         403:
          description: El usuario no tiene permisos para realizar la acción
         404:
          description: Establecimiento no enontrado
         500:
          description: Error del servidor
  /companies/:
    get:
      description: |
        List user's companies
      security:
        - Bearer: []
      responses:
        200:
          description: Empresas obtenidas correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/Company'  
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      description: |
        Creates a new company
      security:
        - Bearer: []
      parameters:
        -
          name: company
          in: body
          required: true
          description: Company info
          schema:
            $ref: '#/definitions/CompanyPOST'
      responses:
        200:
          description: Empresas creada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /companies/{id}/:
    patch:
      description: |
        Updates company's data
      security:
        - Bearer: []
      parameters:
        -
          name: company
          in: body
          required: true
          description: Company info
          schema:
            $ref: '#/definitions/Company'
        -
          name: id
          in: path
          required: true
          description: Company's id 
          type: integer   
      responses:
        204:
          description: Empresa actualizada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Empresa no enontrada
        500:
          description: Error del servidor
    delete:
      description: |
        Deletes a company
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          description: Company's id 
          type: integer  
      responses:
        204:
          description: Empresa eliminada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Empresa no enontrada
        500:
          description: Error del servidor
  /companies/establishments/:
    get:
      description: |
        Lists companies with its establishments in brief format
      security:
        - Bearer: []
      responses:
        200:
          description: Establecimientos obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/EstablishmentBrief'    
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /lots/:
    get:
      description: |
         List lots
      security:
        - Bearer: []
      responses:
        200:
          description: Lotes obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/Lot'  
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      security:
        - Bearer: []
      description: |
        Creates a new lot
      parameters:
        -
          name: lot
          in: body
          required: true
          description: Lots info
          schema:
            $ref: '#/definitions/LotPOST'
      responses:
        200:
          description: Potrero creada correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /lots/unasigned/:
    get:
      description: |
         List unasigned lots
      security:
        - Bearer: []
      responses:
        200:
          description: Lotes obtenidos correctamente
          schema:
            type: array
            items:
              type: object
              properties:
                id: 
                  type: integer
                name: 
                  type: string
                area:
                  type: number
                  format: float
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /lots/{id}/:
    patch:
      security:
        - Bearer: []
      description: |
        Updates a lot
      parameters:
        -
          name: lot
          in: body
          required: true
          description: Lots info
          schema:
            $ref: '#/definitions/LotPOST'
        -
          name: id
          in: path
          required: true
          description: Lots's id 
          type: integer  
      responses:
        204:
          description: Potrero actualizado correctamente    
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Potrero no enontrado
        500:
          description: Error del servidor
    delete:
      description: |
        Deletes a lot
      security:
        - Bearer: []
      parameters:
        -
          name: id
          in: path
          required: true
          description: Lots's id 
          type: integer  
      responses:
        204:
          description: Lote eliminada correctamente   
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Potrero no enontrado
        500:
          description: Error del servidor
  /crea_groups/:
    get:
      description: |
         List Crea groups
      security:
        - Bearer: []
      responses:
        200:
          description: Crea groups obtenidos correctamente
          schema:
            type: array
            items:
              $ref: '#/definitions/CreaGroup'  
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### ADMINISTRATION SERVICES END
  
  ### AUX SERVICES
  /forms/characterizations/:
    get:
      description: |
        Lists every field with its options to fill the categorizations and filters forms
      security:
        - Bearer: []
      responses:
        200:
          description: Formularios obtenidos correctamente
          schema:
              $ref: '#/definitions/CharacterizationsAndFiltersFormList'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  ### AUX SERVICES END
  
  ### INDICATORS SERVICES
  /indicators/summary/:
    get:
      description: |
        Returns list of indicators acording to user configuration
      parameters:
        - 
         name: filters
         in: body
         required: true
         description: Filters to calculate indicators
         schema:
            properties:
              company_id:
                type: integer
              crea_group_id:
                type: integer
              establishment_id:
                type: integer
              exercise_dates:
                type: array
                items:
                  type: string
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
             type: object
             properties:
                general:
                  type: object
                  properties:
                    economical_evolution:
                      type: object
                      properties:
                        series:
                          type: object
                          properties:
                            pb: 
                              type: array
                              items:
                                type: integer
                            ik:
                              type: array
                              items:
                                type: integer
                            costs:
                              type: array
                              items:
                                type: integer
                        categories:
                          type: array
                          items:
                            type: string
                    area_evolution:
                      type: object
                      properties:
                        series:
                          type: object
                          properties:
                            agrcultural: 
                              type: array
                              items:
                                type: integer
                            forest:
                              type: array
                              items:
                                type: integer
                            milkmaid:
                              type: array
                              items:
                                type: integer
                            cattle:
                              type: array
                              items:
                                type: integer
                            fine_seed:
                              type: array
                              items:
                                type: integer
                        categories:
                          type: array
                          items:
                            type: string    
                agricultural:
                  type: object
                  properties:
                    crude_product_evolution:
                      type: object
                      properties:
                        series:
                          type: object
                          properties:
                            others: 
                              type: array
                              items:
                                type: integer
                            fine_seed:
                              type: array
                              items:
                                type: integer
                            cultivation:
                              type: array
                              items:
                                type: integer
                            wool:
                              type: array
                              items:
                                type: integer
                            ovine:
                              type: array
                              items:
                                type: integer  
                            bovine:
                              type: array
                              items:
                                type: integer  
                        categories:
                          type: array
                          items:
                            type: string    
                cattle:
                  type: object
                  properties:
                    kg_evolution:
                      type: object
                      properties:
                        series:
                          type: object
                          properties:
                            ovine: 
                              type: array
                              items:
                                type: integer
                            bovine:
                              type: array
                              items:
                                type: integer
                            wool:
                              type: array
                              items:
                                type: integer
                        categories:
                          type: array
                          items:
                            type: string    
                milk:
                  type: object
                  properties:
                    milk_production_evolution:
                      type: object
                      properties:
                        series:
                          type: object
                          properties:
                            production: 
                              type: array
                              items:
                                type: integer
                            price:
                              type: array
                              items:
                                type: integer
                        categories:
                          type: array
                          items:
                            type: string    
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  /indicators/graphic/management/:
    get:
      description: |
        Returns an indicators tree acording to filters selected
      parameters:
        - 
           name: filters
           in: body
           required: false
           description: Filters to calculate indicators
           schema:
              properties:
                company_id:
                  type: integer
                crea_group_id:
                  type: integer
                establishment_id:
                  type: integer
                exercise_date:
                  type: string
                  format: date
                comparative:
                  type: object
                  properties:
                    compare_w_myself:
                      type: boolean
                    exercise_date:
                      type: string
                      format: date
                    company_id:
                      type: integer
                    crea_group_id:
                      type: integer  
                    establishment_id:
                      type: integer
                    characterization:
                      $ref: '#/definitions/CharacterizationPOSTList'
                    filters:
                      type: array
                      items:
                        $ref: '#/definitions/IndicatorFilterPOSTList'
      responses:
        200:
          description: Indicador obtenido correctamente
          schema:
             type: array
             items:
              $ref: '#/definitions/IndicatorTree'        
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor      
  /indicators/graphic/margin/:
    get:
      description: |
        Returns the evolution of MB for the delected exercises
      parameters:
        - 
         name: filters
         in: body
         required: true
         description: Filters to calculate indicators
         schema:
            properties:
              company_id:
                type: integer
              crea_group_id:
                type: integer
              establishment_id:
                type: integer
              exercise_dates:
                type: array
                items:
                  type: string
              exercise:
                type: string
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
             type: object
             properties:
                mb_evolution:
                  type: object
                  properties:
                    series:
                      type: object
                      properties:
                        agricultural: 
                          type: array
                          items:
                            type: integer
                        cattle:
                          type: array
                          items:
                            type: integer
                        forest:
                          type: array
                          items:
                            type: integer
                        fine_seed:
                          type: array
                          items:
                            type: integer
                    categories:
                      type: array
                      items:
                        type: string
                mb_table:
                  type: object
                  properties:
                    columns:
                      type: array
                      items: 
                        type: string
                    rows:
                      type: array
                      items:
                        type: string
                        
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor        
  /indicators/detail/:
    get:
      description: |
        Returns an indicator list to show on the table
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
             type: array
             items:
              $ref: '#/definitions/IndicatorDetailList'
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      description: |
        Calculates an indicator acording to selected chategorization and filters
      parameters:
        - 
           name: comparative
           in: body
           required: false
           description: Filters to calculate indicator
           schema:
              properties:
                  compare_w_myself:
                    type: boolean
                  exercise:
                    type: integer
                  company_id:
                    type: integer
                  establishment_id:
                    type: integer
                  characterization:
                    $ref: '#/definitions/CharacterizationPOSTList'
                  filters:
                      type: array
                      items:
                        $ref: '#/definitions/IndicatorFilterPOSTList'
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
             type: object
             properties:
              comparative:
                type: string
              exercise: 
                type: string
              indicators:
                type: object
                properties:
                  indicator1_id:
                    type: number
                    format: float
        400:
          description: Error del cliente
        500:
          description: Error del servidor
    delete:
      description: |
        Deletes a stored indicator detail
      parameters:
        - 
           name: indicator
           in: body
           required: false
           description: Indicator data to delete
           schema:
              properties:
                exercise:
                  type: string
                  format: date
                comparative:
                  type: string
      responses:
        204:
          description: Indicador eliminada correctamente   
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        404:
          description: Indicador no enontrado
        500:
          description: Error del servidor
  /indicators/detail/configuration/:
    get:
      description: |
        Returns an indicator identifier list to show on the table
      responses:
        200:
          description: Indicadores obtenidos correctamente
          schema:
             type: array
             items:
              type: string
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
    post:
      description: |
        Sends an indicator identifier list to save user's indicator table configuration
      parameters:
        - 
           name: indicators
           in: body
           required: false
           description: List of Indicators reference name
           schema:
              type: array
              items:
                type: string
      responses:
        200:
          description: Indicadores obtenidos correctamente
        400:
          description: Error del cliente
        401:
          description: Usuario no autenticado
        403:
          description: El usuario no tiene permisos para realizar la acción
        500:
          description: Error del servidor
  
  
  ### INDICATORS DEFINITIONS END     
        
definitions:
  ### USERS definitions:
  Permissions:
    enum:
      - NO PERMISSION
      - EDIT
      - VIEW
    type: string  
  User:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
      email:
        type: string
      name:
        type: string
      role: 
        enum: 
          - ADMINISTRADOR 
          - ADMINISTRATIVO SISTEMA
          - ASESOR
          - PRODUCTOR
          - ADMINISTRATIVO PRODUCTOR
          - INVITADO
        type: string
      temporary:
        type: boolean
      end_date:
        type: string
        format: date
      permissions:
        type: object
        properties:
          indicators:
            type: object
            properties:
              summary:
                $ref: '#/definitions/Permissions'
              comparative: 
                $ref: '#/definitions/Permissions'
              sustentability:
                $ref: '#/definitions/Permissions'
              margin: 
                $ref: '#/definitions/Permissions'
              details: 
                $ref: '#/definitions/Permissions'
      establishments:
        type: array
        items:
          type: integer
  ### USERS DEFINITIONS END
  
  ### ADMINISTRATION DEFINITIONS
  Establishment:
    type: object
    properties:
      id:
        type: integer
      name:
        type: string
      active:
        type: boolean
      crea_group:
        $ref: '#/definitions/CreaGroup'
      coneat:
        type: integer
      location:
        type: object
        properties:
          latitude: 
            type: number
            format: float
          longitude:
            type: number
            format: float
      share_fucrea:
        type: boolean
      share_group:
        type: boolean
      padrons:
        type: array
        items:  
          $ref: '#/definitions/Padron'
      lots:
        type: array
        items:  
          type: object
          properties:
            id: 
              type: integer
            name:
              type: string
      characterizations:
        type: array
        items: 
          $ref: '#/definitions/CharacterizationPOSTList'
  EstablishmentPATCH:
    type: object
    properties:
      name:
        type: string
      active:
        type: boolean
      coneat:
        type: integer
      location:
        type: object
        properties:
          latitude: 
            type: number
            format: float
          longitude:
            type: number
            format: float
      share_fucrea:
        type: boolean
      share_group:
        type: boolean
      padrons:
        type: array
        items:  
          $ref: '#/definitions/PadronPATCH'
      lots:
        type: array
        items:  
          type: integer
  EstablishmentBrief:
    type: object
    properties:
      company:
        type: object
        properties:
          id:
            type: integer
          name: 
            type: string
          establishments:
            type: array
            items:
              type: object
              properties:
                id: 
                  type: integer
                name:
                  type: string
                closed_exercises:
                  type: array
                  items:
                    type: integer
  CharacterizationPOSTList:
    type: object
    properties:
      agriculture: 
        type: integer
      sistema_producto_vacuno: 
        type: integer
      sistema_producto_ovino: 
        type: integer
      forestacion_comercial: 
        type: integer
      evolucion_propiedad_empresas_familiares: 
        type: integer
      fecha_nacimiento_decisor: 
        type: string
        format: date
      riego: 
        type: integer
      nivel_instruccion_decisor: 
        type: integer
      residencia_decisor: 
        type: integer
      dias_semana_decisor: 
        type: integer
      gegraphic_zone:
        type: integer
        description: "Applies only in indicators filtering"
  IndicatorFilterPOSTList:
    type: object
    properties:
      comparative_group:
        type: integer
      aggregation_type:
        type: integer
      ordering_type:
        type: integer
      indicator:
        type: object
        properties:
          type:
            type: string
          name:
            type: string
  CharacterizationFormList:
    type: object
    properties:
      agriculture: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      sistema_producto_vacuno: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      sistema_producto_ovino: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      forestacion_comercial: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      evolucion_propiedad_empresas_familiares: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      riego: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      nivel_instruccion_decisor: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      residencia_decisor: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      dias_semana_decisor: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string   
      geographic_zone: 
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string   
  IndicatorFilterFormList:
    type: object
    properties:
      comparative_groups:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      aggregation_type:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
      ordering_type:        
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string  
      indicators:
        type: array
        items:
          type: object
          properties:
            value:
              type: integer
            description:
              type: string
  CharacterizationsAndFiltersFormList:
    type: object
    properties:
      filters:
        $ref: '#/definitions/IndicatorFilterFormList'
      characterizations:
        $ref: '#/definitions/CharacterizationFormList'
  Lot:
    type: object
    properties:
      id: 
        type: integer
        readOnly: true
      description: 
        type: string
      code: 
        type: string
      area:
        type: number
        format: float
      productive_area:
        type: number
        format: float
      coneat:
        type: integer
      posession:
        enum:
          - PROPIO
          - AJENO
        type: string
      leasing:
        type: object
        properties:
          start_date:
            type: string
            format: date
          end_date:
            type: string
            format: date
          cost:
            type: number
            format: float
  LotPOST:
    type: object
    properties:
      description: 
        type: string
      code: 
        type: string
      area:
        type: number
        format: float
      productive_area:
        type: number
        format: float
      coneat:
        type: integer     
      posession:
        enum:
          - PROPIO
          - AJENO
        type: string
      leasing:
        type: object
        properties:
          start_date:
            type: string
            format: date
          end_date:
            type: string
            format: date
          cost:
            type: number
            format: float
  CreaGroup:
    type: object
    properties:
      id: 
        type: integer
        readOnly: true
      name: 
        type: string
      establishments:
        type: array
        items:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
  Company:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
      fantasy_name:
        type: string
      business_name:
        type: string
      rut:
        type: string
      establishments:
        type: array
        items:
          type: integer
  CompanyPOST:
    type: object
    properties:
      fantasy_name:
        type: string
      business_name:
        type: string
      rut:
        type: string
      establishments:
        type: array
        items:
          type: integer        
  Department:
    type: object
    properties:
      id:
        type: integer
      name: 
        type: string
  Padron:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
      padron_number: 
        type: string
      department: 
        $ref: '#/definitions/Department'
  PadronPATCH:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
      padron_number: 
        type: string
      department: 
        type: integer
  ### ADMINISTRATION DEFINITIONS END        
  ### ADMINISTRATION DEFINITIONS END        
          
  ### INDICATORS DEFINITIONS
  IndicatorTree:
    type: object
    properties:
      'r%':
        type: object
        properties:
          value:
            type: number
            format: float
          children:
            type: object
            properties:
              Cd:
                type: object
                properties:
                  value:
                    type: number
                    format: float
              L:
                type: object
                properties:
                  value:
                    type: number
                    format: float
                  children:
                    type: object
                    properties:
                      patrimonio:
                        type: object
                        properties:
                          value:
                            type: number
                            format: float
                      pasivo:
                        type: object
                        properties:
                          value:
                            type: number
                            format: float
                          children:
                            type: object
                            properties:
                              largo_plazo:
                                type: object
                                properties:
                                  value:
                                    type: number
                                    format: float
                              corto_plazo:
                                type: object
                                properties:
                                  value:
                                    type: number
                                    format: float      
              R%:
                type: object
                properties:
                  value:
                    type: number
                    format: float
                  children:
                    type: object
                    properties:
                      activos:
                        type: object
                        properties:
                          value: 
                            type: number
                            format: float
                          children:
                            type: object
                            properties:
                              indicadores:
                                type: object
                                properties:
                                  value:
                                    type: number
                                    format: float
                              bienes_inmuebles:
                                type: object
                                properties:
                                  value:
                                    type: number
                                    format: float
                                  children:
                                    type: object
                                    properties:
                                      mejoramientos_extensivos:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float
                                      pasturas:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float
                                      montes_artificiales:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float
                                      tierra:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float 
                                          children:
                                            type: object
                                            properties:
                                              valor_usd_ha:
                                                type: object
                                                properties:
                                                  value:
                                                    type: number
                                                    format: float        
                                              superficie_en_ha:
                                                type: object
                                                properties:
                                                  value:
                                                    type: number
                                                    format: float         
                                      mejoras_fijas:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float
                              bienes_muebles:
                                type: object
                                properties:
                                  value:
                                    type: number
                                    format: float
                                  children:
                                    type: object
                                    properties:
                                      otros:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float
                                      vehiculos:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float
                                      maquinaria:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float
                                      stock_ovino:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float                                         
                                      stock_vacuno:
                                        type: object
                                        properties:
                                          value:
                                            type: number
                                            format: float          
                              disponible_y_realizable:
                                type: object
                                properties:
                                  value:
                                    type: number
                                    format: float
                      ik:
                        type: object
                        properties:
                          value:
                            type: number
                            format: float
                          children:
                            type: object
                            properties:
                              fuente_y_uso_de_fondos:
                                type: object
                                properties:
                                  value:
                                    type: number
                                    format: float
                              rel_i_p:
                                type: object
                                properties:
                                  value:
                                    type: number
                                    format: float      
                              pb:
                                type: object
                                properties:
                                  value:
                                    type: number
                                    format: float
  IndicatorDetailList:
    type: object
    properties:
      criteria:
        type: string
      exercise:
        type: string
      indicators:
        type: object
        properties:
          indicator1_id:
            type: object
            properties:
              name:
                type: string
              value:
                type: number
                format: float
          indicator2_id:
            type: object
            properties:
              name:
                type: string
              value:
                type: number
                format: float
  ### INDICATORS DEFINITIONS END